Simple code based on observer pattern 
